<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extending riskmetric • riskmetric</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extending riskmetric">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">riskmetric</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/riskmetric.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/extending-riskmetric.html">Extending riskmetric</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaR/riskmetric/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extending riskmetric</h1>
                        <h4 data-toc-skip class="author">R Validation
Hub</h4>
            
            <h4 data-toc-skip class="date">2024-09-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaR/riskmetric/blob/master/vignettes/extending-riskmetric.Rmd" class="external-link"><code>vignettes/extending-riskmetric.Rmd</code></a></small>
      <div class="d-none name"><code>extending-riskmetric.Rmd</code></div>
    </div>

    
    
<p><code>riskmetric</code> is designed to be readily extensible. This is
done through use of the S3 method dispatch system and a conscious
acknowledgement of the varying needs that someone may have when
assessing package risk. With this in mind, every user-facing function is
designed first and foremost to be flexible.</p>
<p>Here we’ll walk through a trivial example where we’ll extend
<code>riskmetric</code> to add a new assessment, scoring and risk
summary function to determine the risk associated with a package given
its name starts with the letter “r”.</p>
<div class="section level2">
<h2 id="package-classes">Package Classes<a class="anchor" aria-label="anchor" href="#package-classes"></a>
</h2>
<p>Before we can assess a package we first need to represent a package
as data. We refer to this collection of package metadata as a “package
reference” - a way of referring to the related information we’ve been
able to pull together about a package. This is represented as a
<code>pkg_ref</code> class object. As dimensions of risk are assessed,
the data needed to evaluate it in those terms is cached within this
object, building up a small store of information about the package which
other assessments can refer to or build off of.</p>
<p>Importantly, not all references to packages are equal. We can collect
information given the source code, a locally installed package or by
scraping data about a package from the web. There’s a hierarchy of
subclasses that encapsulate these disparate use cases.</p>
<pre><code>pkg_ref
 ├─ pkg_source
 ├─ pkg_install
 └─ pkg_remote
     ├─ pkg_cran_remote
     └─ pkg_bioc_remote</code></pre>
<p>These subclasses direct the behavior of all downstream operations and
provides flexibility about how to bucket the implementations of how
similar data can be collected from a number of potential sources. For
example, to determine the author of a package it would be easiest to
look at a package’s <code>DESCRIPTION</code> file where this content is
maintained. However, without access to the source or installed files,
one could find the same information on the CRAN package webpage. Using
these subclasses, the appropriate method of collecting this data can be
selected.</p>
</div>
<div class="section level2">
<h2 id="adding-an-assessment">Adding an Assessment<a class="anchor" aria-label="anchor" href="#adding-an-assessment"></a>
</h2>
<p>Assessments are the atomic unit of the <code>riskmetric</code>
package, and are used to kick off an individual metric evaluation. Each
assessment is a generic function starting with an <code>assess_</code>
prefix, which can dispatch based on the subclass of the
<code>pkg_ref</code> object.</p>
<div class="section level3">
<h3 id="assessment-example">Assessment Example<a class="anchor" aria-label="anchor" href="#assessment-example"></a>
</h3>
<p>As an example, take a look at how <code>assess_has_news</code> has
been implemented. We’ll focus on just the generic and the
<code>pkg_install</code> functions:</p>
<pre><code><span><span class="co">#&gt; assess_has_news &lt;- function (x, ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     UseMethod("assess_has_news")</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; attr(,"column_name")</span></span>
<span><span class="co">#&gt; [1] "has_news"</span></span>
<span><span class="co">#&gt; attr(,"label")</span></span>
<span><span class="co">#&gt; [1] "number of discovered NEWS files" </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; assess_has_news.pkg_install &lt;- NULL</span></span></code></pre>
<p>There are a couple things to note. First, the S3 system is used to
dispatch functionality for the appropriate package reference class.
Since the way we’d assess the inclusion of a NEWS file might be
different for an installed package or remotely sourced metadata, we may
have separate functions to process these datatypes in distinct ways.</p>
<p>Second, for each assessment, a <code>pkg_metric</code> object is
returned. This stores the atomic data pertaining to the metric and
importantly adopts a unique subclass for the assessment function.</p>
<p>Finally, a cosmetic <code>"column_name"</code> attribute is tagged to
the function. This is used when calling the <code>assess</code>
function. The <code>assess</code> verb is a convenience function which
steps through all available assessments returning a <code>tibble</code>
of assessment outputs. The <code>"column_name"</code> provides a more
user-friendly label for the assessment in this <code>tibble</code>.</p>
</div>
<div class="section level3">
<h3 id="writing-a-new-assessment">Writing a New Assessment<a class="anchor" aria-label="anchor" href="#writing-a-new-assessment"></a>
</h3>
<p>Now we’ll write our assessment. Eventually we want to consider a
package high risk if the name does not start with “r”. We’ll need to
make a <code>pkg_metric</code> object containing the first letter of the
name.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">assess_name_first_letter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">UseMethod</a></span><span class="op">(</span><span class="st">"assess_name_first_letter"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">assess_name_first_letter</span>, <span class="st">"column_name"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"name_first_letter"</span></span>
<span></span>
<span><span class="va">assess_name_first_letter.pkg_ref</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/pkg_metric.html">pkg_metric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">name</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"pkg_metric_name_first_letter"</span><span class="op">)</span></span>
<span><span class="op">}</span> </span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adding-pkg_ref-metadata">Adding <code>pkg_ref</code> Metadata<a class="anchor" aria-label="anchor" href="#adding-pkg_ref-metadata"></a>
</h2>
<p>Perhaps we want to reuse metadata used when assessing the first
letter so that it can be reused by other assessments. For particularly
taxing metadata, such as metadata that requires a query against a public
API, scraping a web page or a large data download, it’s important to
store it for other assessment functions to reuse.</p>
<p>To handle this, we define a function for <code>pkg_ref_cache</code>
to dispatch to.</p>
<div class="section level3">
<h3 id="example-metadata-caching">Example Metadata Caching<a class="anchor" aria-label="anchor" href="#example-metadata-caching"></a>
</h3>
<p>This is how the <code>riskmetric</code> package handles parsing the
DESCRIPTION file so that it can feed into all downstream assessments
without having to re-parse the file each time or copy the code to do
so.</p>
<pre><code><span><span class="co">#&gt; pkg_ref_cache.description &lt;- function (x, name, ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     UseMethod("pkg_ref_cache.description")</span></span>
<span><span class="co">#&gt; } </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; pkg_ref_cache.description.pkg_install &lt;- function (x, name, ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     read.dcf(file.path(x$path, "DESCRIPTION"))</span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
<p>Once these are defined, they’ll be automatically called when the
field is first accessed by the <code>pkg_ref</code> object, and then
stored for any downstream uses.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmar.github.io/riskmetric/" class="external-link">riskmetric</a></span><span class="op">)</span></span>
<span><span class="va">package</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pkg_ref.html">pkg_ref</a></span><span class="op">(</span><span class="st">"riskmetric"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; &lt;pkg_install, pkg_ref&gt; riskmetric v0.2.4.9000</span></span>
<span><span class="co">#&gt; $path</span></span>
<span><span class="co">#&gt;   [1] "/home/user/username/R/4.4/Resources/library/riskmetric"</span></span>
<span><span class="co">#&gt; $source</span></span>
<span><span class="co">#&gt;   [1] "pkg_install"</span></span>
<span><span class="co">#&gt; $version</span></span>
<span><span class="co">#&gt;   [1] '0.2.4.9000'</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt;   [1] "riskmetric"</span></span>
<span><span class="co">#&gt; $bug_reports...</span></span>
<span><span class="co">#&gt; $bug_reports_host...</span></span>
<span><span class="co">#&gt; $bug_reports_url...</span></span>
<span><span class="co">#&gt; $description...</span></span>
<span><span class="co">#&gt; $downloads...</span></span>
<span><span class="co">#&gt; $examples...</span></span>
<span><span class="co">#&gt; $help...</span></span>
<span><span class="co">#&gt; $help_aliases...</span></span>
<span><span class="co">#&gt; $license...</span></span>
<span><span class="co">#&gt; $maintainer...</span></span>
<span><span class="co">#&gt; $news...</span></span>
<span><span class="co">#&gt; $r_cmd_check...</span></span>
<span><span class="co">#&gt; $release_date...</span></span>
<span><span class="co">#&gt; $remote_checks...</span></span>
<span><span class="co">#&gt; $source_control_url...</span></span>
<span><span class="co">#&gt; $vignettes...</span></span>
<span><span class="co">#&gt; $website_urls...</span></span></code></pre>
<p>Notice that upon initialization, the <code>description</code> field
indicates that it hasn’t yet been evaluated with a trailing
<code>...</code> in the name. When accessed, the object will call a
caching function to go out and grab the package metadata and return the
newly derived value.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package</span><span class="op">$</span><span class="va">description</span></span></code></pre></div>
<p>Because the <code>pkg_ref</code> object stores an environment,
caching this value once makes them available for any future attempts to
access the field. This is helpful because we, as developers of the
package, don’t need to think critically about the order that assessments
are performed, and allows users to redefine the order of assessments
without worry about how metadata is acquired.</p>
</div>
<div class="section level3">
<h3 id="writing-a-metadata-cache">Writing a Metadata Cache<a class="anchor" aria-label="anchor" href="#writing-a-metadata-cache"></a>
</h3>
<p>Now, for our new metric, we want to cache the package name’s first
letter. We need to add a new <code>pkg_ref_cache</code> function for our
field. Thankfully, any subclass of <code>pkg_ref</code> can access the
first letter the same way, so we just need the one function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkg_ref_cache.name_first_letter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">name</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">name</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>After adding this caching function, we need to make a small
modification to <code>assess_name_first_letter.pkg_ref</code> in order
use our newly cached value.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">assess_name_first_letter.pkg_ref</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/pkg_metric.html">pkg_metric</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">name_first_letter</span>, class <span class="op">=</span> <span class="st">"pkg_metric_name_first_letter"</span><span class="op">)</span></span>
<span><span class="op">}</span> </span></code></pre></div>
<p>Let’s try it out!</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "riskmetric"</span></span>
<span><span class="va">package</span><span class="op">$</span><span class="va">name_first_letter</span></span>
<span><span class="co">#&gt; [1] "r"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="defining-an-assessment-scoring-function">Defining an Assessment Scoring Function<a class="anchor" aria-label="anchor" href="#defining-an-assessment-scoring-function"></a>
</h2>
<p>Next, we need a function for scoring our assessment output. In this
case, our output is a <code>pkg_metric</code> object whose data is the
first letter of the package name.</p>
<p>We’ll add a dispatched function for the <code>score</code> function.
As a convention, these functions return a numeric value representing how
well the package conforms to best practices with values between 0 (poor
practice) and 1 (best practice).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metric_score.pkg_metric_name_first_letter</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"r"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-our-assessment-to-the-pkg_assess-verb">Adding our Assessment to the <code>pkg_assess()</code> Verb<a class="anchor" aria-label="anchor" href="#adding-our-assessment-to-the-pkg_assess-verb"></a>
</h2>
<p>The <code>assess</code> function accepts a list of functions to
apply. <code>riskmetric</code> provides a shorthand,
<code><a href="../reference/all_assessments.html">all_assessments()</a></code>, to collect all the included assessment
functions, and you’re free to add to that list to customize your own
assessment toolkit.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/pkg_ref.html">pkg_ref</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"riskmetric"</span>, <span class="st">"utils"</span>, <span class="st">"tools"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pkg_assess.html">pkg_assess</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/all_assessments.html">all_assessments</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">assess_name_first_letter</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 23</span></span></span>
<span><span class="co">#&gt;   package    version    pkg_ref             covr_coverage has_news remote_checks</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lst_f_p_&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lst_f_p_&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lst_f_&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lst_f_p_&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> riskmetric 0.2.4.9000 riskmetric<span style="color: #949494;">&lt;install&gt;</span> NA            1        NA           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> utils      4.4.1      utils<span style="color: #949494;">&lt;install&gt;</span>      NA            0        NA           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> tools      4.4.1      tools<span style="color: #949494;">&lt;install&gt;</span>      NA            0        NA           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 17 more variables: news_current &lt;lst_f_p_&gt;, r_cmd_check &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   exported_namespace &lt;lst_f_p_&gt;, has_vignettes &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   export_help &lt;lst_f_p_&gt;, has_website &lt;lst_f_p_&gt;, has_maintainer &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   bugs_status &lt;lst_f_p_&gt;, size_codebase &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_source_control &lt;lst_f_p_&gt;, has_bug_reports_url &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   downloads_1yr &lt;lst_f_p_&gt;, reverse_dependencies &lt;lst_f_p_&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_examples &lt;lst_f_p_&gt;, dependencies &lt;lst_f_p_&gt;, license &lt;lst_f_p_&gt;, …</span></span></span></code></pre></div>
<p>Our scoring function will automatically get picked up and used by the
score method.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pkg_ref.html">pkg_ref</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"riskmetric"</span>, <span class="st">"utils"</span>, <span class="st">"tools"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pkg_assess.html">pkg_assess</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/all_assessments.html">all_assessments</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">assess_name_first_letter</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pkg_score.html">pkg_score</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 24</span></span></span>
<span><span class="co">#&gt;   package    version    pkg_ref             pkg_score covr_coverage has_news  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lst_f_p_&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;pkg_scor&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;pkg_scor&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> riskmetric 0.2.4.9000 riskmetric<span style="color: #949494;">&lt;install&gt;</span>     0.542 NA            1         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> utils      4.4.1      utils<span style="color: #949494;">&lt;install&gt;</span>          0.703 NA            0         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> tools      4.4.1      tools<span style="color: #949494;">&lt;install&gt;</span>          0.748 NA            0         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18 more variables: remote_checks &lt;pkg_scor&gt;, news_current &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   r_cmd_check &lt;pkg_scor&gt;, exported_namespace &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_vignettes &lt;pkg_scor&gt;, export_help &lt;pkg_scor&gt;, has_website &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_maintainer &lt;pkg_scor&gt;, bugs_status &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   size_codebase &lt;pkg_scor&gt;, has_source_control &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_bug_reports_url &lt;pkg_scor&gt;, downloads_1yr &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   reverse_dependencies &lt;pkg_scor&gt;, has_examples &lt;pkg_scor&gt;, …</span></span></span></code></pre></div>
<p>and we can define our own summarizing weights by passing a named list
to <code>pkg_score</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pkg_ref.html">pkg_ref</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"riskmetric"</span>, <span class="st">"utils"</span>, <span class="st">"tools"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pkg_assess.html">pkg_assess</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/all_assessments.html">all_assessments</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">assess_name_first_letter</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pkg_score.html">pkg_score</a></span><span class="op">(</span>weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>has_news <span class="op">=</span> <span class="fl">1</span>, name_first_letter <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 24</span></span></span>
<span><span class="co">#&gt;   package    version    pkg_ref             pkg_score covr_coverage has_news  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lst_f_p_&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;pkg_scor&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;pkg_scor&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> riskmetric 0.2.4.9000 riskmetric<span style="color: #949494;">&lt;install&gt;</span>         0 NA            1         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> utils      4.4.1      utils<span style="color: #949494;">&lt;install&gt;</span>              1 NA            0         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> tools      4.4.1      tools<span style="color: #949494;">&lt;install&gt;</span>              1 NA            0         </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18 more variables: remote_checks &lt;pkg_scor&gt;, news_current &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   r_cmd_check &lt;pkg_scor&gt;, exported_namespace &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_vignettes &lt;pkg_scor&gt;, export_help &lt;pkg_scor&gt;, has_website &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_maintainer &lt;pkg_scor&gt;, bugs_status &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   size_codebase &lt;pkg_scor&gt;, has_source_control &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   has_bug_reports_url &lt;pkg_scor&gt;, downloads_1yr &lt;pkg_scor&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   reverse_dependencies &lt;pkg_scor&gt;, has_examples &lt;pkg_scor&gt;, …</span></span></span></code></pre></div>
<p>Of course you can do any downstream processing of the resulting
<code>tibble</code> if you’d like to further fine-tune your
summarization using a nonlinear function.</p>
</div>
<div class="section level2">
<h2 id="how-you-can-help">How you can help…<a class="anchor" aria-label="anchor" href="#how-you-can-help"></a>
</h2>
<p>The <code>riskmetric</code> package was designed to be easily
extensible. You can develop dispatched functions in your development
environment, hone them into well formed assessments and contribute them
back to the core <code>riskmetric</code> package once you’re done.</p>
<p>If you’d like feedback before embarking on developing a new metric,
please feel free to <a href="https://github.com/pharmaR/riskmetric/issues/new?labels=Metric%20Proposal" class="external-link">file
an issue on the riskmetric GitHub</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by R Validation Hub, Doug Kelkhoff, Marly Gotti, Eli Miller, Kevin K, Yilong Zhang, Eric Milliman, Juliane Manitz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
